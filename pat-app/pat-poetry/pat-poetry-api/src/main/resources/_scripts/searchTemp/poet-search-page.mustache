{
  "from": {{from}},
  "size": {{size}},
  {{#noSources}}
  "_source": [""],
  {{/noSources}}
  "query":{
      "bool": {
            "must": [
                  {{#hasKey}}
                        {
                            "query_string": {
                               "fields" : ["title^5", "subtitle^4","author^3", "properties^2","content"],
                               "query": "{{key}}"
                            }
                        }
                  {{/hasKey}}
                  {{#hasJoin}},{{/hasJoin}}
                  {{#hasProps}}
                        {
                             "terms": {
                                "propKeys": {{#join}}propKeys{{/join}},
                                {{#props}}
                                    "properties.{{propKey}}":{{#join}}propVals{{/join}}{{end}}
                                {{/props}}
                             }
                        }
                  {{/hasProps}}
            ]
      }
  },
  "aggs":  { {{#aggsInfos}}"{{aggsName}}":{"terms":{"field":"{{field}}","size":"{{size}}"}} {{end}} {{/aggsInfos}} },
  {{#needHighLight}}
    "highlight": {
             "fields": {
                "title": {
                  "no_match_size": 30
                },
                "author" : {
                  "no_match_size": 10
                },
                "content": {
                  "no_match_size": 100
                }
             }
    },
    {{/needHighLight}}
  "sort":{
       "_score":{
          "order":"desc"
        },
        "index":{
          "order":"asc"
        }
   }


}