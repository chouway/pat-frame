{
  "from": {{from}},
  "size": {{size}},
  {{#noSources}}
  "_source": ["_id"],
  {{/noSources}}
  "query":{
      "bool": {
            "must": [
                  {{#hasProps}}
                        {
                             "terms": {
                                "propKeys": "{{#join delimiter=' '}}propKeys{{/join delimiter=' '}}",
                                {{#props}}
                                    "properties.{{propKey}}":{{#join}}propVals{{/join}}{{end}}
                                {{/props}}
                             }
                        },
                  {{/hasProps}}
                  {{#hasKey}}
                        {
                            "query_string": {
                               "fields" : ["title^5", "subtitle^4","author^3", "properties^2","paragraphs^2","baikeDesc"],
                               "query": "{{key}}"
                            }
                        }
                  {{/hasKey}}
                  {{^hasKey}}
                  {"match_all": {}}
                  {{/hasKey}}
            ]
      }
  },
  "aggs":  { {{#aggsInfos}}"{{aggsName}}":{"terms":{"field":"{{field}}","size":"{{size}}"}} {{end}} {{/aggsInfos}} },
  {{#needHighLight}}
    "highlight": {
             "fields": {
                "title": {
                },
                "author" : {
                },
                "paragraphs": {
                }
             }
    },
    {{/needHighLight}}
      "sort":{
             "_score":{
                "order":"desc"
              },
               {{#hasKey}}
                  "index":{
                    "order":"asc"
                  }
              {{/hasKey}}
              {{^hasKey}}
                  "count":{
                    "order":"desc"
                  }
              {{/hasKey}}
         }

}