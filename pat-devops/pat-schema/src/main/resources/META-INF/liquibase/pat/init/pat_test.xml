<?xml version="1.0" encoding="UTF-8"?>
<databaseChangeLog xmlns="http://www.liquibase.org/xml/ns/dbchangelog"
                   xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
                   xsi:schemaLocation="http://www.liquibase.org/xml/ns/dbchangelog
         http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-3.6.xsd">

    <preConditions>
        <dbms type="postgresql"/>
    </preConditions>

    <changeSet id="tagDatabase.version.0.0.0" author="ywzhou" labels="测试运行开始">
        <tagDatabase tag="v0.0.0"/>
    </changeSet>

    <changeSet id="init_table.pat_test_info.202103.0" author="ywzhou">
        <sql>
            <![CDATA[
                -- ----------------------------
                -- Table structure for pat_test_info
                -- ----------------------------
                DROP TABLE IF EXISTS "public"."pat_test_info";
                CREATE TABLE "public"."pat_test_info" (
                  "id" int8 NOT NULL GENERATED BY DEFAULT AS IDENTITY (
                  INCREMENT 1
                  MINVALUE  1
                  MAXVALUE 9223372036854775807
                  START 1
                  ),
                  "name" varchar(255) COLLATE "pg_catalog"."default",
                  "department_id" int4,
                  "create_time" timestamp(6),
                  CONSTRAINT "TEST_DAO_pkey" PRIMARY KEY ("id")
                );

                COMMENT ON TABLE "public"."pat_test_info" IS '测试表';
            ]]>
        </sql>
        <comment>初始化 pat_test_info 数据表</comment>
    </changeSet>

    <changeSet id="add_record.pat_test_info.202103.1" author="ywzhou">
        <sql>
            <![CDATA[
               -- ----------------------------
                -- Records of SM_DB_SQL_TEST
                -- ----------------------------
                INSERT INTO "public"."pat_test_info"("name", "department_id", "create_time") VALUES ('test1', 1, '2021-03-16 17:25:05');
                INSERT INTO "public"."pat_test_info"("name", "department_id", "create_time") VALUES ('test2', 2, '2021-03-16 17:25:14');
                INSERT INTO "public"."pat_test_info"("name", "department_id", "create_time") VALUES ('test3', 5, '2021-03-16 17:25:40');

            ]]>
        </sql>
        <comment>初始化 pat_test_info 数据</comment>
        <rollback>
            <sql>delete from "public"."pat_test_info" where name like 'test%'</sql>
        </rollback>
    </changeSet>

    <!--打个正式上线标签-->
    <changeSet id="tagDatabase.version.0.0.1" author="ywzhou" labels="测试表终止">
        <tagDatabase tag="v0.0.1"/>
    </changeSet>


</databaseChangeLog>